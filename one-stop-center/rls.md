| schema_name | table_name       | rls_enabled | rls_forced | policy_name                             | command | permissive | roles         | using_expression                                                                                                                                                                                                                                                                                                                                      | with_check_expression                                                                                      |
| ----------- | ---------------- | ----------- | ---------- | --------------------------------------- | ------- | ---------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| public      | book_categories  | false       | false      | Public read book categories             | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_categories  | false       | false      | Public read book_categories             | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_categories  | false       | false      | book_categories_insert_all              | a       | true       | authenticated | null                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | book_categories  | false       | false      | book_categories_select_all              | r       | true       | authenticated | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_copies      | false       | false      | Public read book copies                 | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_copies      | false       | false      | Public read book_copies                 | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_copies      | false       | false      | book_copies_admin_write                 | *       | true       | -             | ((auth.role() = 'authenticated'::text) OR (auth.role() = 'service_role'::text))                                                                                                                                                                                                                                                                       | ((auth.role() = 'authenticated'::text) OR (auth.role() = 'service_role'::text))                            |
| public      | book_copies      | false       | false      | book_copies_insert_all                  | a       | true       | -             | null                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | book_copies      | false       | false      | book_copies_insert_any_auth             | a       | true       | authenticated | null                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | book_copies      | false       | false      | book_copies_select_all                  | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_copies      | false       | false      | book_copies_update_any_auth             | w       | true       | authenticated | true                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | book_loans       | false       | false      | Public read book loans                  | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_loans       | false       | false      | Public read book_loans                  | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_loans       | false       | false      | book_loans_admin_write                  | *       | true       | -             | ((auth.role() = 'authenticated'::text) OR (auth.role() = 'service_role'::text))                                                                                                                                                                                                                                                                       | ((auth.role() = 'authenticated'::text) OR (auth.role() = 'service_role'::text))                            |
| public      | book_loans       | false       | false      | book_loans_insert_any_auth              | a       | true       | authenticated | null                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | book_loans       | false       | false      | book_loans_select_all                   | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | book_loans       | false       | false      | book_loans_update_any_auth              | w       | true       | authenticated | true                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | booking_logs     | true        | false      | Booking logs follow booking policies    | *       | true       | -             | (EXISTS ( SELECT 1
   FROM room_bookings rb
  WHERE ((rb.id = booking_logs.booking_id) AND ((auth.uid() IN ( SELECT staff.auth_user_id
           FROM staff
          WHERE (staff.id = rb.requestor_id))) OR (EXISTS ( SELECT 1
           FROM staff
          WHERE ((staff.auth_user_id = auth.uid()) AND (staff.role = 'admin'::text))))))))    | null                                                                                                       |
| public      | books            | false       | false      | Public read books                       | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | books            | false       | false      | books_admin_write                       | *       | true       | -             | ((auth.role() = 'authenticated'::text) OR (auth.role() = 'service_role'::text))                                                                                                                                                                                                                                                                       | ((auth.role() = 'authenticated'::text) OR (auth.role() = 'service_role'::text))                            |
| public      | books            | false       | false      | books_insert_all                        | a       | true       | -             | null                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | books            | false       | false      | books_insert_any_auth                   | a       | true       | authenticated | null                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | books            | false       | false      | books_select_all                        | r       | true       | -             | true                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | books            | false       | false      | books_update_any_auth                   | w       | true       | authenticated | true                                                                                                                                                                                                                                                                                                                                                  | true                                                                                                       |
| public      | event_schedules  | true        | false      | Event schedules follow booking policies | *       | true       | -             | (EXISTS ( SELECT 1
   FROM room_bookings rb
  WHERE ((rb.id = event_schedules.booking_id) AND ((auth.uid() IN ( SELECT staff.auth_user_id
           FROM staff
          WHERE (staff.id = rb.requestor_id))) OR (EXISTS ( SELECT 1
           FROM staff
          WHERE ((staff.auth_user_id = auth.uid()) AND (staff.role = 'admin'::text)))))))) | null                                                                                                       |
| public      | room_bookings    | true        | false      | Staff can create bookings               | a       | true       | -             | null                                                                                                                                                                                                                                                                                                                                                  | (auth.uid() IN ( SELECT staff.auth_user_id
   FROM staff
  WHERE (staff.id = room_bookings.requestor_id))) |
| public      | room_bookings    | true        | false      | Staff can update own pending bookings   | w       | true       | -             | (((auth.uid() IN ( SELECT staff.auth_user_id
   FROM staff
  WHERE (staff.id = room_bookings.requestor_id))) AND (status = 'PENDING'::text)) OR (EXISTS ( SELECT 1
   FROM staff
  WHERE ((staff.auth_user_id = auth.uid()) AND (staff.role = 'admin'::text)))))                                                                                      | null                                                                                                       |
| public      | room_bookings    | true        | false      | Staff can view their own bookings       | r       | true       | -             | ((auth.uid() IN ( SELECT staff.auth_user_id
   FROM staff
  WHERE (staff.id = room_bookings.requestor_id))) OR (EXISTS ( SELECT 1
   FROM staff
  WHERE ((staff.auth_user_id = auth.uid()) AND (staff.role = 'admin'::text)))))                                                                                                                       | null                                                                                                       |
| public      | rooms            | true        | false      | Rooms are viewable by everyone          | r       | true       | -             | (status = 'ACTIVE'::text)                                                                                                                                                                                                                                                                                                                             | null                                                                                                       |
| public      | staff            | false       | false      | null                                    | null    | null       | null          | null                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | staff_allowance  | false       | false      | null                                    | null    | null       | null          | null                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | staff_bank       | false       | false      | null                                    | null    | null       | null          | null                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | staff_contact    | false       | false      | null                                    | null    | null       | null          | null                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | staff_employment | false       | false      | null                                    | null    | null       | null          | null                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | staff_passport   | false       | false      | null                                    | null    | null       | null          | null                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                       |
| public      | travel_requests  | false       | false      | travel_requests_admin_select_all        | r       | true       | authenticated | (EXISTS ( SELECT 1
   FROM staff s
  WHERE ((s.auth_user_id = auth.uid()) AND (s.role = 'admin'::text))))                                                                                                                                                                                                                                             | null                                                                                                       |
| public      | travel_requests  | false       | false      | travel_requests_admin_update_all        | w       | true       | authenticated | (EXISTS ( SELECT 1
   FROM staff s
  WHERE ((s.auth_user_id = auth.uid()) AND (s.role = 'admin'::text))))                                                                                                                                                                                                                                             | (EXISTS ( SELECT 1
   FROM staff s
  WHERE ((s.auth_user_id = auth.uid()) AND (s.role = 'admin'::text))))  |